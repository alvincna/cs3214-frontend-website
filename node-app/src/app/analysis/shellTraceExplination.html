<h1>ShellTrace</h1>
<p>The ShellTrace analyzer draws a graph that models the flow of resources such as file descriptors during the
    program execution.</p>
<p>This graph is a directed graph composed of nodes and edges.</p>
<ul>
    <li>Nodes - A node is an event (function call or signal) that contains the relevant parameters and return
        values. A node is present on this graph if it has created or used a resource.
    </li>
    <li>Edges - An edge on this graph represents a dependency between the source node and the destination node.
        This establishes a <i>happens before</i> relationship where the source node must happen before the destination
        node.
    </li>
</ul>
<p>For Example consider the following code.</p>
<script type="text/ng-template" id="ShellTraceExampleCode">
int main(){
    int fd = open("/tmp/dummy_file", O_WRONLY | O_CREAT);
    int fd2 = open("/tmp/dummy_file2", O_WRONLY | O_CREAT);
    write(fd, "HI", 2);
    close(fd);
    close(fd2);
}</script>
<div hljs include="'ShellTraceExampleCode'" language="c"></div>
<p>This code produces the following graph.</p>
<img src="images/ShellTraceExampleGraph.svg"/>
<p>We can see that there are 2 different resources that are being traced here: file descriptors 3(fd) and 4(fd2).</p>
<p>The order between the calls for fd and fd2 do not matter, so there is not a dependency between their respective open
    calls.</p>
<p>However, the order of the calls for a particular file descriptor does matter.
    We must have the file descriptor 3 open to write to it and have written to it before we can close it.</p>

<p>The graphs generated by the ShellTrace analysis show the relevant dependencies that must obey an ordering.
    If a node has multiple parents (aka it has multiple edges going into it) then that node must occur after both parent
    nodes to be correct.</p>
<div>
    <p>To create this analysis, we generated a ShellTrace graph for the reference solution and your working solution and
        compared them.</p>
    <p> If you have an additional node in your graph that is not present in the reference solution, you will see it
        colored in red.</p>
</div>
<div>
    <p>Like the dynamic analysis part of the EshMD analysis ShellTrace will be run on each of the tests in <tt>stdriver.py</tt>.
    </p>
    <p>The results of each test under ShellTrace are:</p>
    <ul>
        <li><span class="label label-success">Pass</span> - The program passed the test and the generated graphs
            matched
        </li>
        <li><span class="label label-warning">Warning</span> - The program passed the test but the graph your
            program generated did not match the reference graph
        </li>
        <li><span class="label label-danger">Fail</span> - The program did not pass the test</li>
    </ul>
</div>

<p>The example below shows the output of running on a shell that creates an extra pipe.
    This generates a warning because the code will correctly pass the test but is wastefully allocating file
    descriptors.</p>
<img src="images/ShellTraceWarning.png"/>
<p>We can see that the relevant pipe system call is highlighted in red to suggest investigating why another pipe
    is called.</p>
</div>