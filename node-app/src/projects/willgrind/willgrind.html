

<div class="container">
    <h1>Willgrind</h1>
    <p>The threadpool checker</p>
</div>

<div class="container">

    <div class="row">

        <div class="col-sm-12">
            <h2 >Usage</h2>
            <pre><code>$ wgdriver.py</code></pre>
            <p>Ensure that threadpool.c is present in your working directory and follow the menu prompts.</p>
            <p>wgdriver will indicate a result with one of the following:</p>
            <ul>
                <li><span class="label label-default">[+]</span> - Pass</li>
                <li><span class="label label-default">[V]</span> - Violation</li>
                <li><span class="label label-default">[S]</span> - Synchronization Violation (WillgrindPlus)</li>
                <li><span class="label label-default">[D]</span> - Deadlock</li>
                <li><span class="label label-default">[F]</span> - Threadpool Failure</li>
                <li><span class="label label-default">[C]</span> - Willgrind Failure</li>
            </ul>
            <h2 >Results</h2>
            <p>After running your threadpool, the tool will indicate exactly one of the following:</p>
            <ul>
                <li><span class="label label-success">Pass</span> - Execution was correct</li>
                <li><span class="label label-danger">Order Violation</span> - Threadpool functions were not executed in a correct order</li>
                <li><span class="label label-danger">Semantic Violation</span> - Execution did not follow project specifications</li>
                <li><span class="label label-info">Deadlock</span> - Threadpool entered deadlock</li>
                <li><span class="label label-warning">Timeout</span> - Execution took more than a reasonable amount of time</li>
                <li><span class="label label-warning">Segfault</span> - Threadpool segfaulted</li>
                <li><span class="label label-warning">Abort</span> - Threadpool aborted</li>
                <li><span class="label label-warning">Crash</span> - Threadpool crashed the tool (possible memory corruption)</li>
            </ul>
            <h2 >WillgrindPlus</h2>
            <p>The extension can do everything Willgrind does, but provides and additional result:</p>
            <ul>
                <li><span class="label label-danger">Synchronization Violation</span> - Missing synchronization between two states</li>
            </ul>
            <p>WillgrindPlus is much slower and as a result only runs small tests.  <b>It is recommended to use the regular Willgrind first.</b></p>
            <h2>Report</h2>
            <h4>Threads Report</h4>
            <p>The threads report shows recent futures that have been <i>created</i>, <i>started</i>, <i>completed</i>, and <i>obtained</i>. Furthermore, a total is provided for each of those states.  You want to make sure the totals are all equal.</p>
            <p>Totals for individual threads are provided by hovering.  This is a good way to see the distribution of work amongst threads.  Ideally, all worker threads should do the same amount of work.</p>
            <figure class="figure">
                <img src="images/thread_report.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
                <figcaption class="figure-caption"><b>Example: </b>psum_test 100000 -n 4. This test has 1024 futures, 1 root thread, and 4 worker threads</figcaption>
            </figure>
            <h4>Execution Report</h4>
            <p>If you run into a semantic violation, you will see an execution report that shows the states of an incorrect future.  The future number is also provided so you can tell when the violation occurred (Future #9 is very early in the execution)</p>
            <figure class="figure">
                <img src="images/execution_report.png" class="figure-img img-fluid rounded" alt="A generic square placeholder image with rounded corners in a figure.">
                <figcaption class="figure-caption"><b>Example: </b>future_get returned before the task was complete (or even started)</figcaption>
            </figure>
            <h2>Feedback</h2>
            <p>If you have questions, comments, or interesting results send me a note at <a href="mailto:applewil@vt.edu">applewil@vt.edu</a>. Also a survey will be released to collect anonymous feedback for our research. Thanks</p>

        </div><!-- /.col-main -->

    </div><!-- /.row -->

</div><!-- /.container -->
